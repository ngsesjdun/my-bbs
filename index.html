<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>なんI</title>
<style>
button {
  width: 100%;
  padding: 10px 0;
  font-size: 1em;
  font-weight: normal;
  text-align: center;
  cursor: pointer;
  margin-top: 4px;
  border-radius: 4px;
  border: 1px solid #000;
  color: #666666;
  background-color: #fff;
}
.post {
  border-bottom: 1px solid #666;
  margin: 6px 0;
  padding: 4px 2px;
}
.post-header {
  font-weight: bold;
}
.post-body {
  margin-left: 1em;
  white-space: pre-wrap;
}
.thread-first {
  margin-left: 1em;
  color: #444;
  font-size: 0.9em;
}
#thread-title {
  color: blue;
  font-weight: bold;
  font-size: 27px;
  margin-bottom: 4px;
}
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<div id="header" style="font-weight:bold; font-size:25px; margin:8px 0;">なんでも実況ジュピター</div>
<font size="2">苦情、追加して欲しい要素は、運営ですというスレから</font>
<hr>

<div id="wrap">
  <div id="list-view">
    <div id="new-thread">
      <input id="thread-title-input" type="text" placeholder="スレッドタイトル" /><br>
      <input id="thread-name-input" type="text" placeholder="名前（任意）" /><br>
      <textarea id="thread-body-input" placeholder="本文（最初のレス）" rows="2" style="width:100%;"></textarea>
      <button id="create-thread" type="button">スレ作成</button>
    </div>
    <font size="2">
      <button id="refresh-threads" style="color:#fff; background-color:#0077ff; ">スレを更新</button>
    </font>
    <div id="thread-box"></div>
  </div>

  <div id="thread-view" style="display:none; margin-top:8px;">
    <div id="thread-title"></div>
    <button id="back-top" type="button">戻る</button>
    <div id="posts"></div>
    <div id="post-form-wrap" style="margin-top:8px;">
      <form id="post-form" onsubmit="return false;">
        <input id="post-name" type="text" placeholder="名前（任意）"><br>
        <textarea id="post-message" placeholder="本文（改行できます）" rows="3" style="width:100%;"></textarea>
        <button id="send" type="button">投稿</button>
        <button id="back" type="button" style="background-color:#fff;">スレ一覧へ</button>
        <button id="refresh-posts" type="button" style="color:#fff; background-color:blue; ">レス更新</button>
      </form>
    </div>
  </div>
</div>

<script type="module">
const _0x39ca54=_0x2166;(function(_0x5dfd00,_0x453288){const _0x29783e=_0x2166,_0x14e2c6=_0x5dfd00();while(!![]){try{const _0x36a9ca=parseInt(_0x29783e(0x10b))/0x1*(-parseInt(_0x29783e(0x110))/0x2)+-parseInt(_0x29783e(0x14b))/0x3*(parseInt(_0x29783e(0x15d))/0x4)+-parseInt(_0x29783e(0x16f))/0x5*(parseInt(_0x29783e(0x114))/0x6)+parseInt(_0x29783e(0x132))/0x7*(-parseInt(_0x29783e(0x142))/0x8)+parseInt(_0x29783e(0x108))/0x9*(parseInt(_0x29783e(0x15c))/0xa)+-parseInt(_0x29783e(0x14f))/0xb+parseInt(_0x29783e(0x152))/0xc*(parseInt(_0x29783e(0x122))/0xd);if(_0x36a9ca===_0x453288)break;else _0x14e2c6['push'](_0x14e2c6['shift']());}catch(_0xa1ee3f){_0x14e2c6['push'](_0x14e2c6['shift']());}}}(_0x5dc6,0x6553f));import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';const SUPABASE_URL=_0x39ca54(0x143),MOZI=_0x39ca54(0x107),db=createClient(SUPABASE_URL,MOZI);function _0x5dc6(){const _0x3f9129=['eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93b3B6Z2VsaXloZ3hwbnl3c2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwNjU3MTYsImV4cCI6MjA3MDY0MTcxNn0.0zUkNS8KeXULcl7HxoYQvbD7J0FTf3Z9-4Xq4rpDdX8','1413IqJSIB','sort','threadName','2LZaTZQ','refresh-posts','thread-first','getFullYear','posts','431324vWdABi','----','https://api.ipify.org?format=json','thread-title','24exgYKC','投稿失敗','getDate','thread-view','getDay','innerHTML','display','getMinutes','getMonth','content','postgres_changes','<br>','createTextNode','random','5499FtLXsw','IP取得失敗','back-top','thread','select','\x20ID:','4px','getElementById','span','getItem','padStart','&quot;','\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22>','createElement','本文は200文字までです','post-name','1438171bPHIpb','id,title','margin','send','back','&gt;','block','連投は2秒空けてください','preventDefault','<a\x20href=\x22','getSeconds','reduce','length','none','threads','red','32NesfVP','https://owopzgeliyhgxpnywscy.supabase.co','className','post-message','marginLeft','now','thread-box','channel','created_at','5097EAoqxq','value','初回本文投稿失敗','addEventListener','4570071GWmyxl','id,title,created_at,posts(created_at,content)','?thread=','57408JVLzBF','bbsUserId','order','タイトルを入れて','floor','match','has','lastUpdated','&#39;','insert','48310aAVPxg','692Fyitil','</a>','public','limit','post','postName','from','div','スレ作成失敗','appendChild','subscribe','click','forEach','style','textContent','href','trim','replace','505670JJwzIu','error','title','setItem','charCodeAt','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','get','2px\x200','thread_id'];_0x5dc6=function(){return _0x3f9129;};return _0x5dc6();}function escapeHTML(_0x526448){const _0x3c2910=_0x39ca54;return _0x526448[_0x3c2910(0x16e)](/[&<>"']/g,_0xdb4440=>({'&':'&amp;','<':'&lt;','>':_0x3c2910(0x137),'\x22':_0x3c2910(0x12d),'\x27':_0x3c2910(0x15a)}[_0xdb4440]));}function parseDecorations(_0x2fa17c){const _0x59efab=_0x39ca54;return _0x2fa17c=_0x2fa17c[_0x59efab(0x16e)](/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g,(_0x3d59b4,_0x25a381,_0x5b6873)=>{const _0x3c9f59=_0x59efab;return _0x3c9f59(0x13b)+_0x5b6873+_0x3c9f59(0x12e)+escapeHTML(_0x25a381)+_0x3c9f59(0x15e);}),_0x2fa17c=_0x2fa17c[_0x59efab(0x16e)](/(https?:\/\/[^\s<>"']+)/g,_0x5d0130=>{const _0x1662f3=_0x59efab;return _0x1662f3(0x13b)+_0x5d0130+_0x1662f3(0x12e)+escapeHTML(_0x5d0130)+_0x1662f3(0x15e);}),_0x2fa17c;}async function generateFixedId(){const _0x316a7b=_0x39ca54,_0xc11436=localStorage[_0x316a7b(0x12b)]('bbsUserId');if(_0xc11436)return _0xc11436;let _0x395fa2='unknown';try{const _0xc2a6bf=await fetch(_0x316a7b(0x112)),_0x453d52=await _0xc2a6bf['json']();_0x395fa2=_0x453d52['ip'];}catch(_0x3808fe){console['warn'](_0x316a7b(0x123),_0x3808fe);}const _0x1c1a0d=_0x316a7b(0x103);let _0x485691='';const _0x273358=_0x395fa2+Math[_0x316a7b(0x156)](Math[_0x316a7b(0x121)]()*0x2710);for(let _0x4bb7bb=0x0;_0x4bb7bb<0x4;_0x4bb7bb++){_0x485691+=_0x1c1a0d['charAt'](_0x273358[_0x316a7b(0x102)](_0x4bb7bb%_0x273358[_0x316a7b(0x13e)])%_0x1c1a0d[_0x316a7b(0x13e)]);}return localStorage[_0x316a7b(0x101)](_0x316a7b(0x153),_0x485691),_0x485691;}function parseNameAndContent(_0x21f45c){const _0x1cc82e=_0x39ca54;let _0x30358b='名無し',_0x2e2aad='green',_0x17c0d1=_0x21f45c;const _0x547e04=_0x21f45c['match'](/^#([^\s]+)\s*/);if(_0x547e04){const _0x17b5f0=_0x547e04[0x1];_0x17b5f0==='admin546'?(_0x30358b='管理人⭐︎',_0x2e2aad=_0x1cc82e(0x141)):_0x30358b=_0x17b5f0,_0x17c0d1=_0x21f45c[_0x1cc82e(0x16e)](/^#[^\s]+\s*/,'');}return{'displayName':_0x30358b,'displayNameColor':_0x2e2aad,'content':_0x17c0d1};}const listView=document['getElementById']('list-view'),threadBox=document['getElementById'](_0x39ca54(0x148)),postsEl=document[_0x39ca54(0x129)](_0x39ca54(0x10f)),viewWrap=document[_0x39ca54(0x129)](_0x39ca54(0x117)),viewTitle=document['getElementById'](_0x39ca54(0x113)),newTitle=document[_0x39ca54(0x129)]('thread-title-input'),newBody=document[_0x39ca54(0x129)]('thread-body-input'),newName=document[_0x39ca54(0x129)]('thread-name-input'),btnCreate=document['getElementById']('create-thread'),inputName=document[_0x39ca54(0x129)](_0x39ca54(0x131)),inputMsg=document[_0x39ca54(0x129)](_0x39ca54(0x145)),btnSend=document[_0x39ca54(0x129)](_0x39ca54(0x135)),btnBack=document[_0x39ca54(0x129)](_0x39ca54(0x136)),btnBackTop=document[_0x39ca54(0x129)](_0x39ca54(0x124)),btnRefreshThreads=document[_0x39ca54(0x129)]('refresh-threads'),btnRefreshPosts=document['getElementById'](_0x39ca54(0x10c));let currentThreadId=null,lastPostTime=0x0;function saveNames(){const _0x4e3971=_0x39ca54;localStorage[_0x4e3971(0x101)](_0x4e3971(0x10a),newName[_0x4e3971(0x14c)]),localStorage['setItem'](_0x4e3971(0x162),inputName[_0x4e3971(0x14c)]);}function loadNames(){const _0x18bdee=_0x39ca54;if(localStorage['getItem']('threadName'))newName['value']=localStorage['getItem']('threadName');if(localStorage[_0x18bdee(0x12b)](_0x18bdee(0x162)))inputName['value']=localStorage['getItem']('postName');}loadNames();function fmt(_0x48b88c){const _0x3e2368=_0x39ca54;if(!_0x48b88c)return'';const _0x43bfb0=_0x48b88c instanceof Date?_0x48b88c:new Date(_0x48b88c);if(isNaN(_0x43bfb0))return'';const _0x45d64f=['日','月','火','水','木','金','土'][_0x43bfb0[_0x3e2368(0x118)]()],_0x149727=(_0x1a7eed,_0x5b207d=0x2)=>String(_0x1a7eed)[_0x3e2368(0x12c)](_0x5b207d,'0');return _0x43bfb0[_0x3e2368(0x10e)]()+'/'+_0x149727(_0x43bfb0[_0x3e2368(0x11c)]()+0x1)+'/'+_0x149727(_0x43bfb0[_0x3e2368(0x116)]())+'('+_0x45d64f+')\x20'+_0x149727(_0x43bfb0['getHours']())+':'+_0x149727(_0x43bfb0[_0x3e2368(0x11b)]())+':'+_0x149727(_0x43bfb0[_0x3e2368(0x13c)]());}async function loadThreads(){const _0x133208=_0x39ca54,{data:_0x5da422,error:_0x1708bf}=await db['from'](_0x133208(0x140))['select'](_0x133208(0x150));if(_0x1708bf){console[_0x133208(0x170)](_0x1708bf);return;}_0x5da422[_0x133208(0x169)](_0x4c13f7=>{const _0x21a577=_0x133208;if(_0x4c13f7['posts']&&_0x4c13f7[_0x21a577(0x10f)][_0x21a577(0x13e)]>0x0){const _0x215f9d=_0x4c13f7[_0x21a577(0x10f)][_0x21a577(0x13d)]((_0x40fb26,_0xf92bc9)=>new Date(_0x40fb26[_0x21a577(0x14a)])>new Date(_0xf92bc9[_0x21a577(0x14a)])?_0x40fb26:_0xf92bc9);_0x4c13f7[_0x21a577(0x159)]=new Date(_0x215f9d[_0x21a577(0x14a)]);}else _0x4c13f7[_0x21a577(0x159)]=new Date(_0x4c13f7['created_at']);}),_0x5da422[_0x133208(0x109)]((_0x15646d,_0x5400f3)=>_0x5400f3['lastUpdated']-_0x15646d[_0x133208(0x159)]),threadBox['innerHTML']='';for(const _0x185c46 of _0x5da422){const _0x30024b=document['createElement'](_0x133208(0x164));_0x30024b[_0x133208(0x16a)]['border']='1px\x20solid\x20#000',_0x30024b[_0x133208(0x16a)][_0x133208(0x134)]=_0x133208(0x105),_0x30024b[_0x133208(0x16a)]['padding']=_0x133208(0x128);const _0x1f5cd1=document[_0x133208(0x12f)]('a');_0x1f5cd1[_0x133208(0x16c)]=_0x133208(0x151)+_0x185c46['id'],_0x1f5cd1[_0x133208(0x119)]=escapeHTML(_0x185c46[_0x133208(0x100)])+('\x20('+_0x185c46[_0x133208(0x10f)][_0x133208(0x13e)]+')'),_0x1f5cd1[_0x133208(0x14e)](_0x133208(0x168),_0x45fe41=>{const _0x11d2e3=_0x133208;_0x45fe41[_0x11d2e3(0x13a)](),openThread(_0x185c46['id'],_0x185c46[_0x11d2e3(0x100)]);}),_0x30024b['appendChild'](_0x1f5cd1);if(_0x185c46[_0x133208(0x10f)]&&_0x185c46[_0x133208(0x10f)]['length']>0x0){const _0x45d950=_0x185c46[_0x133208(0x10f)][_0x133208(0x109)]((_0x281289,_0x4e6971)=>new Date(_0x281289['created_at'])-new Date(_0x4e6971[_0x133208(0x14a)]))[0x0],_0x4e66cb=document[_0x133208(0x12f)]('div');_0x4e66cb[_0x133208(0x144)]=_0x133208(0x10d);let _0x24eb20=_0x45d950[_0x133208(0x11d)][_0x133208(0x16e)](/^\[[A-Z0-9]{4}\]\s*/,'');_0x24eb20=parseDecorations(_0x24eb20),_0x4e66cb[_0x133208(0x119)]=_0x24eb20,_0x30024b[_0x133208(0x166)](_0x4e66cb);}threadBox[_0x133208(0x166)](_0x30024b);}if(!currentThreadId)listView[_0x133208(0x16a)][_0x133208(0x11a)]=_0x133208(0x138);}btnCreate['addEventListener'](_0x39ca54(0x168),async()=>{const _0x21aa29=_0x39ca54;saveNames();const _0x35d8a7=newTitle['value'][_0x21aa29(0x16d)](),_0xa05bae=newBody[_0x21aa29(0x14c)]['trim'](),_0x12b0de=newName[_0x21aa29(0x14c)][_0x21aa29(0x16d)]();if(!_0x35d8a7){alert(_0x21aa29(0x155));return;}if(!_0xa05bae){alert('本文を入れて');return;}const {data:_0x445f56,error:_0xa612e3}=await db['from'](_0x21aa29(0x140))[_0x21aa29(0x15b)]([{'title':_0x35d8a7}])[_0x21aa29(0x126)]()[_0x21aa29(0x160)](0x1)['maybeSingle']();if(_0xa612e3){console['error'](_0xa612e3),alert(_0x21aa29(0x165));return;}const _0x542c86=_0x445f56['id'],_0x54a149=await generateFixedId(),_0x57f3f6=(''+(_0x12b0de?'#'+_0x12b0de+'\x20':'')+_0xa05bae)[_0x21aa29(0x16d)](),{error:_0x4691fa}=await db[_0x21aa29(0x163)](_0x21aa29(0x10f))[_0x21aa29(0x15b)]([{'thread_id':_0x542c86,'content':'['+_0x54a149+']\x20'+_0x57f3f6}]);if(_0x4691fa){console[_0x21aa29(0x170)](_0x4691fa),alert(_0x21aa29(0x14d));return;}newTitle[_0x21aa29(0x14c)]='',newBody[_0x21aa29(0x14c)]='',await loadThreads(),openThread(_0x542c86,_0x35d8a7);});function _0x2166(_0x5740fd,_0x3c2040){const _0x5dc675=_0x5dc6();return _0x2166=function(_0x216681,_0x148b8e){_0x216681=_0x216681-0x100;let _0x38f1aa=_0x5dc675[_0x216681];return _0x38f1aa;},_0x2166(_0x5740fd,_0x3c2040);}async function openThread(_0x9c2d39,_0xd7a222){const _0xfb8263=_0x39ca54;currentThreadId=_0x9c2d39,viewTitle[_0xfb8263(0x16b)]=_0xd7a222,history['replaceState'](null,null,_0xfb8263(0x151)+_0x9c2d39),listView[_0xfb8263(0x16a)][_0xfb8263(0x11a)]=_0xfb8263(0x13f),viewWrap[_0xfb8263(0x16a)][_0xfb8263(0x11a)]=_0xfb8263(0x138),await loadPosts();}async function loadPosts(){const _0x1a9df6=_0x39ca54;if(!currentThreadId)return;const {data:_0x46089b,error:_0x18ed19}=await db[_0x1a9df6(0x163)](_0x1a9df6(0x10f))[_0x1a9df6(0x126)]('id,content,created_at,thread_id')['eq'](_0x1a9df6(0x106),currentThreadId)[_0x1a9df6(0x154)](_0x1a9df6(0x14a),{'ascending':!![]});if(_0x18ed19){console[_0x1a9df6(0x170)](_0x18ed19);return;}postsEl[_0x1a9df6(0x119)]='',(_0x46089b||[])[_0x1a9df6(0x169)]((_0x12d848,_0x360315)=>{const _0x5ddaa6=_0x1a9df6,_0x1ba92c=document[_0x5ddaa6(0x12f)](_0x5ddaa6(0x164));_0x1ba92c[_0x5ddaa6(0x144)]=_0x5ddaa6(0x161);const _0xb7938f=_0x12d848[_0x5ddaa6(0x11d)][_0x5ddaa6(0x157)](/^\[([A-Z0-9]{4})\]\s*/),_0x3adb99=_0xb7938f?_0xb7938f[0x1]:_0x5ddaa6(0x111),_0x3de83f=_0xb7938f?_0x12d848[_0x5ddaa6(0x11d)][_0x5ddaa6(0x16e)](/^\[[A-Z0-9]{4}\]\s*/,''):_0x12d848['content'],{displayName:_0x4ca30c,displayNameColor:_0xa5c3a7,content:_0x262754}=parseNameAndContent(_0x3de83f),_0x341311=document[_0x5ddaa6(0x12f)](_0x5ddaa6(0x164)),_0x1d1bdf=document[_0x5ddaa6(0x12f)](_0x5ddaa6(0x12a));_0x1d1bdf[_0x5ddaa6(0x16a)]['color']=_0xa5c3a7,_0x1d1bdf[_0x5ddaa6(0x16b)]=_0x4ca30c,_0x341311[_0x5ddaa6(0x166)](document[_0x5ddaa6(0x120)]('['+(_0x360315+0x1)+']：')),_0x341311[_0x5ddaa6(0x166)](_0x1d1bdf),_0x341311[_0x5ddaa6(0x166)](document[_0x5ddaa6(0x120)]('：'+fmt(_0x12d848[_0x5ddaa6(0x14a)])+_0x5ddaa6(0x127)+_0x3adb99));const _0x49e791=document[_0x5ddaa6(0x12f)](_0x5ddaa6(0x164));_0x49e791[_0x5ddaa6(0x119)]=parseDecorations(_0x262754)[_0x5ddaa6(0x16e)](/\n/g,_0x5ddaa6(0x11f)),_0x49e791[_0x5ddaa6(0x16a)][_0x5ddaa6(0x146)]='1em',_0x1ba92c[_0x5ddaa6(0x166)](_0x341311),_0x1ba92c[_0x5ddaa6(0x166)](_0x49e791),postsEl[_0x5ddaa6(0x166)](_0x1ba92c);});}btnSend['addEventListener'](_0x39ca54(0x168),async()=>{const _0x41f366=_0x39ca54;saveNames();const _0x4054cd=Date[_0x41f366(0x147)]();if(_0x4054cd-lastPostTime<0x7d0){alert(_0x41f366(0x139));return;}if(!currentThreadId)return;const _0x2e8e73=inputMsg[_0x41f366(0x14c)][_0x41f366(0x16d)](),_0x55db7c=inputName[_0x41f366(0x14c)][_0x41f366(0x16d)]();if(!_0x2e8e73)return;if(_0x2e8e73['length']>0xc8){alert(_0x41f366(0x130));return;}const _0x4ab1c1=await generateFixedId(),_0x462731=(''+(_0x55db7c?'#'+_0x55db7c+'\x20':'')+_0x2e8e73)[_0x41f366(0x16d)](),{error:_0x4e36da}=await db[_0x41f366(0x163)](_0x41f366(0x10f))[_0x41f366(0x15b)]([{'thread_id':currentThreadId,'content':'['+_0x4ab1c1+']\x20'+_0x462731}]);if(_0x4e36da){console[_0x41f366(0x170)](_0x4e36da),alert(_0x41f366(0x115));return;}inputMsg[_0x41f366(0x14c)]='',lastPostTime=_0x4054cd,await loadPosts(),await loadThreads();}),btnBack[_0x39ca54(0x14e)](_0x39ca54(0x168),()=>{const _0x2cc0b9=_0x39ca54;viewWrap['style'][_0x2cc0b9(0x11a)]=_0x2cc0b9(0x13f),listView[_0x2cc0b9(0x16a)][_0x2cc0b9(0x11a)]='block';}),btnBackTop[_0x39ca54(0x14e)](_0x39ca54(0x168),()=>{const _0x5e8967=_0x39ca54;viewWrap[_0x5e8967(0x16a)]['display']=_0x5e8967(0x13f),listView[_0x5e8967(0x16a)]['display']='block';}),btnRefreshThreads[_0x39ca54(0x14e)]('click',async()=>{await loadThreads();}),btnRefreshPosts['addEventListener'](_0x39ca54(0x168),async()=>{if(currentThreadId)await loadPosts();}),db[_0x39ca54(0x149)]('public:posts')['on'](_0x39ca54(0x11e),{'event':'*','schema':_0x39ca54(0x15f),'table':_0x39ca54(0x10f)},_0xf10977=>{loadThreads();if(currentThreadId)loadPosts();})[_0x39ca54(0x167)](),loadThreads();const params=new URLSearchParams(location['search']);if(params[_0x39ca54(0x158)]('thread')){const id=params[_0x39ca54(0x104)](_0x39ca54(0x125));((async()=>{const _0x1ad25a=_0x39ca54,{data:_0x300d9b,error:_0xed2b0c}=await db[_0x1ad25a(0x163)](_0x1ad25a(0x140))[_0x1ad25a(0x126)](_0x1ad25a(0x133))['eq']('id',id)['maybeSingle']();if(_0x300d9b)openThread(_0x300d9b['id'],_0x300d9b['title']);})());}
</script>
</body>
</html>
