<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>なんI</title>
<style>
button {
  width: 100%;
  padding: 10px 0;
  font-size: 1em;
  font-weight: normal;
  text-align: center;
  cursor: pointer;
  margin-top: 4px;
  border-radius: 4px;
  border: 1px solid #000;
  color: #666666;
  background-color: #fff;
}
.post {
  border-bottom: 1px solid #666;
  margin: 6px 0;
  padding: 4px 2px;
}
.post-header {
  font-weight: bold;
}
.post-body {
  margin-left: 1em;
  white-space: pre-wrap;
}
.thread-first {
  margin-left: 1em;
  color: #444;
  font-size: 0.9em;
}
#thread-title {
  color: blue;
  font-weight: bold;
  font-size: 27px;
  margin-bottom: 4px;
}
</style>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<div id="header" style="font-weight:bold; font-size:25px; margin:8px 0;">なんでも実況ジュピター</div>
<font size="2">追加して欲しい要素・苦情は運営ですと言うスレから<br>更新しなきゃいけないけどレスがあれば上がります</font>
<hr>

<div id="wrap">
  <div id="list-view">
    <div id="new-thread">
      <input id="thread-title-input" type="text" placeholder="スレッドタイトル" /><br>
      <textarea id="thread-body-input" placeholder="本文（最初のレス）" rows="2" style="width:100%;"></textarea>
      <button id="create-thread" type="button">スレ作成</button>
    </div>
    <font size="2">
      <button id="refresh-threads" style="color:#fff; background-color:#0077ff; ">スレを更新</button>
    </font>
    <div id="thread-box"></div>
  </div>

  <div id="thread-view" style="display:none; margin-top:8px;">
    <div id="thread-title"></div>
    <button id="back-top" type="button">戻る</button>
    <div id="posts"></div>
    <div id="post-form-wrap" style="margin-top:8px;">
      <form id="post-form" onsubmit="return false;">
        <textarea id="post-message" placeholder="本文（改行できます）" rows="3" style="width:100%;"></textarea>
        <button id="send" type="button">投稿</button>
        <button id="back" type="button" style="background-color:#fff;">スレ一覧へ</button>
        <button id="refresh-posts" type="button" style="color:#fff; background-color:blue; ">レス更新</button>
      </form>
    </div>
  </div>
</div>

<script type="module">
const _0xde6b9b=_0x9b10;(function(_0x13b07d,_0x1b51de){const _0x411670=_0x9b10,_0x110811=_0x13b07d();while(!![]){try{const _0x126598=parseInt(_0x411670(0x1bd))/0x1+parseInt(_0x411670(0x188))/0x2*(parseInt(_0x411670(0x1dc))/0x3)+-parseInt(_0x411670(0x1bf))/0x4*(parseInt(_0x411670(0x1c8))/0x5)+-parseInt(_0x411670(0x192))/0x6*(-parseInt(_0x411670(0x17a))/0x7)+parseInt(_0x411670(0x1d2))/0x8*(parseInt(_0x411670(0x1a4))/0x9)+parseInt(_0x411670(0x19d))/0xa+-parseInt(_0x411670(0x18d))/0xb;if(_0x126598===_0x1b51de)break;else _0x110811['push'](_0x110811['shift']());}catch(_0x4a44d5){_0x110811['push'](_0x110811['shift']());}}}(_0x3523,0x43314));import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';const SUPABASE_URL=_0xde6b9b(0x17b),MOZI='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93b3B6Z2VsaXloZ3hwbnl3c2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwNjU3MTYsImV4cCI6MjA3MDY0MTcxNn0.0zUkNS8KeXULcl7HxoYQvbD7J0FTf3Z9-4Xq4rpDdX8',db=createClient(SUPABASE_URL,MOZI);function escapeHTML(_0x6f59b5){const _0x42d0b5=_0xde6b9b;return _0x6f59b5[_0x42d0b5(0x17e)](/[&<>"']/g,_0x433b5e=>({'&':'&amp;','<':_0x42d0b5(0x1b4),'>':_0x42d0b5(0x195),'\x22':_0x42d0b5(0x1ab),'\x27':_0x42d0b5(0x193)}[_0x433b5e]));}function parseDecorations(_0x173a9d){const _0x174e16=_0xde6b9b;return _0x173a9d=_0x173a9d[_0x174e16(0x17e)](/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g,(_0x384a7c,_0x497c77,_0x271df8)=>{const _0x123951=_0x174e16;return _0x123951(0x17d)+_0x271df8+_0x123951(0x1b5)+escapeHTML(_0x497c77)+_0x123951(0x172);}),_0x173a9d=_0x173a9d[_0x174e16(0x17e)](/(https?:\/\/[^\s<>"']+)/g,_0x215464=>{const _0x811550=_0x174e16;return _0x811550(0x17d)+_0x215464+_0x811550(0x1b5)+escapeHTML(_0x215464)+_0x811550(0x172);}),_0x173a9d;}async function generateFixedId(){const _0x17d027=_0xde6b9b,_0x1d57da=localStorage[_0x17d027(0x191)](_0x17d027(0x1c7));if(_0x1d57da)return _0x1d57da;let _0x2077de=_0x17d027(0x1df);try{const _0x40964c=await fetch('https://api.ipify.org?format=json'),_0x1634db=await _0x40964c[_0x17d027(0x183)]();_0x2077de=_0x1634db['ip'];}catch(_0x3295ab){console[_0x17d027(0x185)](_0x17d027(0x17f),_0x3295ab);}const _0x2c395e=_0x17d027(0x1b8);let _0x34ec61='';const _0x24fe8b=_0x2077de+Math['floor'](Math['random']()*0x2710);for(let _0x515ea9=0x0;_0x515ea9<0x4;_0x515ea9++){_0x34ec61+=_0x2c395e[_0x17d027(0x1d3)](_0x24fe8b[_0x17d027(0x1d7)](_0x515ea9%_0x24fe8b[_0x17d027(0x18b)])%_0x2c395e[_0x17d027(0x18b)]);}return localStorage[_0x17d027(0x196)](_0x17d027(0x1c7),_0x34ec61),_0x34ec61;}const listView=document[_0xde6b9b(0x194)](_0xde6b9b(0x1d0)),threadBox=document[_0xde6b9b(0x194)](_0xde6b9b(0x1a8)),postsEl=document['getElementById'](_0xde6b9b(0x177)),viewWrap=document[_0xde6b9b(0x194)](_0xde6b9b(0x1c5)),viewTitle=document[_0xde6b9b(0x194)]('thread-title'),newTitle=document['getElementById'](_0xde6b9b(0x19b)),newBody=document[_0xde6b9b(0x194)]('thread-body-input'),btnCreate=document[_0xde6b9b(0x194)](_0xde6b9b(0x1c1)),inputMsg=document['getElementById']('post-message'),btnSend=document[_0xde6b9b(0x194)](_0xde6b9b(0x1cf)),btnBack=document[_0xde6b9b(0x194)]('back'),btnBackTop=document['getElementById'](_0xde6b9b(0x1ae)),btnRefreshThreads=document['getElementById'](_0xde6b9b(0x1ad)),btnRefreshPosts=document[_0xde6b9b(0x194)](_0xde6b9b(0x190));let currentThreadId=null,lastPostTime=0x0;function fmt(_0x2e2188){const _0x344b2a=_0xde6b9b;if(!_0x2e2188)return'';const _0x10058d=_0x2e2188 instanceof Date?_0x2e2188:new Date(_0x2e2188);if(isNaN(_0x10058d))return'';const _0x697bb6=['日','月','火','水','木','金','土'][_0x10058d[_0x344b2a(0x1c0)]()],_0x35a6e6=(_0x1066cf,_0x768dbb=0x2)=>String(_0x1066cf)['padStart'](_0x768dbb,'0');return _0x10058d[_0x344b2a(0x1b9)]()+'/'+_0x35a6e6(_0x10058d['getMonth']()+0x1)+'/'+_0x35a6e6(_0x10058d[_0x344b2a(0x1a5)]())+'('+_0x697bb6+')\x20'+_0x35a6e6(_0x10058d['getHours']())+':'+_0x35a6e6(_0x10058d[_0x344b2a(0x17c)]())+':'+_0x35a6e6(_0x10058d[_0x344b2a(0x1c4)]());}async function loadThreads(){const _0x942632=_0xde6b9b,{data:_0x3cc7f9,error:_0x1ebb0e}=await db[_0x942632(0x174)](_0x942632(0x1cb))[_0x942632(0x1b2)](_0x942632(0x1af));if(_0x1ebb0e){console[_0x942632(0x187)](_0x1ebb0e);return;}_0x3cc7f9['sort']((_0x5a09b4,_0x1328f4)=>{const _0x30b7b3=_0x942632,_0x2c42e0=_0x5a09b4[_0x30b7b3(0x177)][_0x30b7b3(0x18b)]>0x0?new Date(_0x5a09b4['posts'][_0x5a09b4['posts'][_0x30b7b3(0x18b)]-0x1]['created_at']):new Date(_0x5a09b4[_0x30b7b3(0x1a0)]),_0x441945=_0x1328f4[_0x30b7b3(0x177)][_0x30b7b3(0x18b)]>0x0?new Date(_0x1328f4['posts'][_0x1328f4[_0x30b7b3(0x177)][_0x30b7b3(0x18b)]-0x1]['created_at']):new Date(_0x1328f4[_0x30b7b3(0x1a0)]);return _0x441945-_0x2c42e0;}),threadBox['innerHTML']='';for(const _0x27a204 of _0x3cc7f9){const _0x5991b8=document[_0x942632(0x1e1)](_0x942632(0x1a3));_0x5991b8[_0x942632(0x179)][_0x942632(0x1d1)]=_0x942632(0x1b3),_0x5991b8['style']['margin']=_0x942632(0x18e),_0x5991b8[_0x942632(0x179)][_0x942632(0x175)]='4px';const _0x2db1e6=document[_0x942632(0x1e1)]('a');_0x2db1e6[_0x942632(0x19a)]=_0x942632(0x1a1)+_0x27a204['id'],_0x2db1e6[_0x942632(0x180)]=escapeHTML(_0x27a204['title'])+('\x20('+_0x27a204[_0x942632(0x177)]['length']+')'),_0x2db1e6[_0x942632(0x1c3)](_0x942632(0x18a),_0x60cb47=>{_0x60cb47['preventDefault'](),openThread(_0x27a204['id'],_0x27a204['title']);}),_0x5991b8[_0x942632(0x1b1)](_0x2db1e6);if(_0x27a204[_0x942632(0x177)]&&_0x27a204[_0x942632(0x177)][_0x942632(0x18b)]>0x0){const _0x5caa94=_0x27a204[_0x942632(0x177)][_0x942632(0x171)]((_0x277649,_0x2f5ee2)=>new Date(_0x277649[_0x942632(0x1a0)])-new Date(_0x2f5ee2[_0x942632(0x1a0)]))[0x0],_0x488bdb=document[_0x942632(0x1e1)](_0x942632(0x1a3));_0x488bdb[_0x942632(0x198)]=_0x942632(0x1db);let _0x33829f=_0x5caa94[_0x942632(0x176)][_0x942632(0x17e)](/^\[[A-Z0-9]{4}\]\s*/,'');_0x33829f=parseDecorations(_0x33829f);const _0x403c69=_0x33829f[_0x942632(0x17e)](/<[^>]*>/g,''),_0x2dde08=Math[_0x942632(0x19f)](_0x403c69[_0x942632(0x18b)]/0x2),_0x19b51d=_0x403c69[_0x942632(0x19c)](0x0,Math[_0x942632(0x19e)](_0x2dde08,0x23))+(_0x403c69[_0x942632(0x18b)]>0x23?'…':'');_0x488bdb[_0x942632(0x180)]=_0x33829f,_0x5991b8[_0x942632(0x1b1)](_0x488bdb);}threadBox[_0x942632(0x1b1)](_0x5991b8);}listView['style'][_0x942632(0x1d9)]=_0x942632(0x181);}btnCreate[_0xde6b9b(0x1c3)]('click',async()=>{const _0x376420=_0xde6b9b,_0x3a5bf0=newTitle[_0x376420(0x1a7)][_0x376420(0x1bc)](),_0x54b594=newBody[_0x376420(0x1a7)][_0x376420(0x1bc)]();if(!_0x3a5bf0){alert(_0x376420(0x18c));return;}if(!_0x54b594){alert(_0x376420(0x1a9));return;}const {data:_0xbac48f,error:_0x5d242}=await db[_0x376420(0x174)](_0x376420(0x1cb))[_0x376420(0x1be)]([{'title':_0x3a5bf0}])['select']()[_0x376420(0x184)](0x1)['maybeSingle']();if(_0x5d242){console[_0x376420(0x187)](_0x5d242),alert('スレ作成失敗');return;}const _0x48f33c=_0xbac48f['id'],_0x3b3f0e=await generateFixedId(),{error:_0x2dd349}=await db['from']('posts')[_0x376420(0x1be)]([{'thread_id':_0x48f33c,'content':'['+_0x3b3f0e+']\x20'+_0x54b594}]);if(_0x2dd349){console[_0x376420(0x187)](_0x2dd349),alert('初回本文投稿失敗');return;}newTitle[_0x376420(0x1a7)]='',newBody[_0x376420(0x1a7)]='',await loadThreads(),openThread(_0x48f33c,_0x3a5bf0);});function _0x9b10(_0x5af449,_0x2f9a04){const _0x3523eb=_0x3523();return _0x9b10=function(_0x9b105b,_0x5b2d86){_0x9b105b=_0x9b105b-0x171;let _0x3eb05d=_0x3523eb[_0x9b105b];return _0x3eb05d;},_0x9b10(_0x5af449,_0x2f9a04);}async function openThread(_0x596001,_0x37445e){const _0x148e70=_0xde6b9b;currentThreadId=_0x596001,viewTitle[_0x148e70(0x1b0)]=_0x37445e,history[_0x148e70(0x1d5)](null,null,_0x148e70(0x1a1)+_0x596001),listView[_0x148e70(0x179)][_0x148e70(0x1d9)]=_0x148e70(0x1de),viewWrap[_0x148e70(0x179)][_0x148e70(0x1d9)]=_0x148e70(0x181),await loadPosts();}async function loadPosts(){const _0x1fc885=_0xde6b9b;if(!currentThreadId)return;const {data:_0xa74a1f,error:_0x41e439}=await db[_0x1fc885(0x174)](_0x1fc885(0x177))['select'](_0x1fc885(0x1ca))['eq'](_0x1fc885(0x1a6),currentThreadId)[_0x1fc885(0x1d8)](_0x1fc885(0x1a0),{'ascending':!![]});if(_0x41e439){console['error'](_0x41e439);return;}postsEl[_0x1fc885(0x180)]='',(_0xa74a1f||[])[_0x1fc885(0x178)]((_0x2a7a62,_0x2b4238)=>{const _0xd8b263=_0x1fc885,_0xaec946=document[_0xd8b263(0x1e1)](_0xd8b263(0x1a3));_0xaec946[_0xd8b263(0x198)]='post';const _0x33d2a0=_0x2a7a62[_0xd8b263(0x176)][_0xd8b263(0x173)](/^\[([A-Z0-9]{4})\]\s*/),_0x12a673=_0x33d2a0?_0x33d2a0[0x1]:_0xd8b263(0x1a2),_0x263281=_0x33d2a0?_0x2a7a62[_0xd8b263(0x176)][_0xd8b263(0x17e)](/^\[[A-Z0-9]{4}\]\s*/,''):_0x2a7a62['content'],_0x2639e=document['createElement'](_0xd8b263(0x1a3)),_0x574e99=document[_0xd8b263(0x1e1)](_0xd8b263(0x1cd));_0x574e99[_0xd8b263(0x179)][_0xd8b263(0x1ce)]=_0xd8b263(0x197),_0x574e99[_0xd8b263(0x1b0)]=_0xd8b263(0x1da),_0x2639e[_0xd8b263(0x1b1)](document[_0xd8b263(0x189)]('['+(_0x2b4238+0x1)+']：')),_0x2639e[_0xd8b263(0x1b1)](_0x574e99),_0x2639e[_0xd8b263(0x1b1)](document['createTextNode']('：'+fmt(_0x2a7a62['created_at'])+_0xd8b263(0x1d6)+_0x12a673));const _0x1f093b=document[_0xd8b263(0x1e1)]('div');_0x1f093b[_0xd8b263(0x180)]=parseDecorations(_0x263281)[_0xd8b263(0x17e)](/\n/g,_0xd8b263(0x1aa)),_0x1f093b[_0xd8b263(0x179)][_0xd8b263(0x1cc)]=_0xd8b263(0x1c6),_0xaec946[_0xd8b263(0x1b1)](_0x2639e),_0xaec946[_0xd8b263(0x1b1)](_0x1f093b),postsEl[_0xd8b263(0x1b1)](_0xaec946);});}function _0x3523(){const _0x19d3c3=['get','json','limit','warn','channel','error','4BxfvlO','createTextNode','click','length','タイトルを入れて','21194052dWMfzh','2px\x200','public:posts','refresh-posts','getItem','38166EaaaQh','&#39;','getElementById','&gt;','setItem','green','className','search','href','thread-title-input','slice','5414220YzMOTX','min','ceil','created_at','?thread=','----','div','142497TtHiVk','getDate','thread_id','value','thread-box','本文を入れて','<br>','&quot;','location','refresh-threads','back-top','id,title,created_at,posts(created_at,content)','textContent','appendChild','select','1px\x20solid\x20#000','&lt;','\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22>','連投は2秒空けてください','https://ngsesjdun.github.io/my-bbs','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','getFullYear','maybeSingle','id,title','trim','422314WPpceh','insert','4VgVuNB','getDay','create-thread','public','addEventListener','getSeconds','thread-view','1em','bbsUserId','291835NOlein','has','id,content,created_at,thread_id','threads','marginLeft','span','color','send','list-view','border','208fcjDUk','charAt','now','replaceState','\x20ID:','charCodeAt','order','display','名無し','thread-first','630858obCyRr','new','none','unknown','title','createElement','sort','</a>','match','from','padding','content','posts','forEach','style','511XejqPV','https://owopzgeliyhgxpnywscy.supabase.co','getMinutes','<a\x20href=\x22','replace','IP取得失敗','innerHTML','block'];_0x3523=function(){return _0x19d3c3;};return _0x3523();}btnSend[_0xde6b9b(0x1c3)]('click',async()=>{const _0x9171f6=_0xde6b9b,_0x1aa06e=Date[_0x9171f6(0x1d4)]();if(_0x1aa06e-lastPostTime<0x7d0){alert(_0x9171f6(0x1b6));return;}if(!currentThreadId)return;let _0xc65ffe=inputMsg['value'][_0x9171f6(0x1bc)]();if(!_0xc65ffe)return;if(_0xc65ffe[_0x9171f6(0x18b)]>0xc8){alert('本文は200文字までです');return;}const _0x3f9dc0=await generateFixedId(),{error:_0x56989a}=await db['from'](_0x9171f6(0x177))[_0x9171f6(0x1be)]([{'thread_id':currentThreadId,'content':'['+_0x3f9dc0+']\x20'+_0xc65ffe}]);if(_0x56989a){console[_0x9171f6(0x187)](_0x56989a),alert('投稿失敗');return;}inputMsg[_0x9171f6(0x1a7)]='',lastPostTime=_0x1aa06e,await loadPosts();}),btnBack['addEventListener'](_0xde6b9b(0x18a),()=>{const _0x4aca7f=_0xde6b9b;window[_0x4aca7f(0x1ac)][_0x4aca7f(0x19a)]=_0x4aca7f(0x1b7);}),btnBackTop[_0xde6b9b(0x1c3)]('click',()=>{const _0x1c00d2=_0xde6b9b;window[_0x1c00d2(0x1ac)][_0x1c00d2(0x19a)]=_0x1c00d2(0x1b7);}),btnRefreshThreads[_0xde6b9b(0x1c3)](_0xde6b9b(0x18a),async()=>{await loadThreads();}),btnRefreshPosts['addEventListener'](_0xde6b9b(0x18a),async()=>{if(currentThreadId)await loadPosts();}),db[_0xde6b9b(0x186)](_0xde6b9b(0x18f))['on']('postgres_changes',{'event':'*','schema':_0xde6b9b(0x1c2),'table':_0xde6b9b(0x177)},_0x33a3b6=>{const _0x5fecdb=_0xde6b9b;if(currentThreadId&&_0x33a3b6[_0x5fecdb(0x1dd)][_0x5fecdb(0x1a6)]===currentThreadId)loadPosts();loadThreads();})['subscribe'](),loadThreads();const params=new URLSearchParams(location[_0xde6b9b(0x199)]);if(params[_0xde6b9b(0x1c9)]('thread')){const id=params[_0xde6b9b(0x182)]('thread');((async()=>{const _0x34045b=_0xde6b9b,{data:_0x3c1f76,error:_0x447758}=await db['from'](_0x34045b(0x1cb))['select'](_0x34045b(0x1bb))['eq']('id',id)[_0x34045b(0x1ba)]();if(_0x3c1f76)openThread(_0x3c1f76['id'],_0x3c1f76[_0x34045b(0x1e0)]);})());}
</script>

</body>
</html>
